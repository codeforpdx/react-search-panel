{"version":3,"sources":["../../node_modules/react-cool-onclickoutside/dist/index.esm.js","../../src/SearchPanel.tsx","../../node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","../../node_modules/use-latest/dist/use-latest.esm.js","../../node_modules/react-use-keypress/lib/index.esm.js","App.tsx","index.tsx"],"names":["_slicedToArray","e","r","Array","isArray","_arrayWithHoles","Symbol","iterator","Object","t","n","o","a","i","u","next","done","push","value","length","return","_iterableToArrayLimit","_unsupportedIterableToArray","TypeError","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","from","_iterableToArray","_nonIterableSpread","prototype","toString","call","slice","constructor","name","test","hasIgnoreClass","target","classList","contains","parentElement","clickedOnScrollbar","document","documentElement","clientWidth","clientX","clientHeight","clientY","getEventOptions","includes","window","addEventListener","defineProperty","get","removeEventListener","canUsePassiveEvents","passive","index","ref","useIsomorphicLayoutEffect","current","aliases","Map","keys","handler","keysRef","handerRef","handleKeydown","event","has","key","shimKeyboardEvent","SearchPanelVariant","props","variant","React","searchField","isMultiSelect","isText","handlePressOutside","setIsExpanded","setIsFocused","handleOnFocus","choices","removeSelectedKey","updateKeys","handleCheckChanged","isNoneSelected","setSelectedKey","selectedKey","noChoiceItem","setSelectedKeys","onSelectionChange","handleSearchChange","onChange","useEffect","ChoiceItem","choice","choiceId","Math","inputType","className","styles","small","href","id","type","checked","selectedKeys","htmlFor","clickOutsideRef","arguments","refs","disabled","eventTypes","excludeScrollbar","c","l","ignoreClass","s","f","d","y","v","b","m","concat","forEach","every","JSON","stringify","useOnclickOutside","useKeypress","onFocus","onSubmit","isExpanded","shadow","focusable","xmlns","viewBox","autoCapitalize","autoComplete","autoCorrect","role","spellCheck","title","placeholder","container","margin","maxWidth","padding","formItem","marginLeft","formLabel","App","useState","input","setInput","text","setVariant","setChoices","console","log","resultChoices","url","axios","response","data","result","show","description","search","VariantChoice","label","variantChoice","style","tabIndex","checkbox","radio","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8c2d7e98.chunk.js","sourcesContent":["import{useRef,useState,useEffect,useCallback}from\"react\";function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _iterableToArrayLimit(e,r){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return t}}function _unsupportedIterableToArray(e,r){if(e){if(\"string\"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var canUsePassiveEvents=function(){if(\"undefined\"==typeof window||\"function\"!=typeof window.addEventListener)return!1;var e=!1,r=Object.defineProperty({},\"passive\",{get:function(){e=!0}}),t=function(){return null};return window.addEventListener(\"test\",t,r),window.removeEventListener(\"test\",t,r),e},DEFAULT_IGNORE_CLASS=\"ignore-onclickoutside\",hasIgnoreClass=function(e,r){for(var t=e.target;t;){var n;if(null===(n=t.classList)||void 0===n?void 0:n.contains(r))return!0;t=t.parentElement}return!1},clickedOnScrollbar=function(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY},getEventOptions=function(e){return!(!e.includes(\"touch\")||!canUsePassiveEvents())&&{passive:!0}},useOnclickOutside=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.refs,n=r.disabled,o=void 0!==n&&n,a=r.eventTypes,i=void 0===a?[\"mousedown\",\"touchstart\"]:a,u=r.excludeScrollbar,c=void 0!==u&&u,l=r.ignoreClass,s=void 0===l?DEFAULT_IGNORE_CLASS:l,f=useRef(e),d=useState([]),y=_slicedToArray(d,2),v=y[0],b=y[1];useEffect((function(){f.current=e}),[e]);var m=useCallback((function(e){b((function(r){return[].concat(_toConsumableArray(r),[{current:e}])}))}),[]);return useEffect((function(){if((null==t?void 0:t.length)||v.length){var e=function(e){if(!hasIgnoreClass(e,s)){var r=[];(t||v).forEach((function(e){var t=e.current;t&&r.push(t)})),c&&clickedOnScrollbar(e)||r.length&&r.every((function(r){return!r.contains(e.target)}))&&f.current(e)}},r=function(){i.forEach((function(r){document.removeEventListener(r,e,getEventOptions(r))}))};if(!o)return i.forEach((function(r){document.addEventListener(r,e,getEventOptions(r))})),function(){r()};r()}}),[v,s,c,o,JSON.stringify(i)]),m};export default useOnclickOutside;export{DEFAULT_IGNORE_CLASS};\n","import React, { useEffect } from \"react\";\nimport styles from \"./styles.module.css\";\nimport useOnclickOutside from \"react-cool-onclickoutside\";\nimport useKeypress from \"react-use-keypress\";\n\n/**\n * Definition of a SearchPanelChoice\n */\nexport interface SearchPanelChoice {\n  /**\n   * Key for a choice can be any unique string.\n   * For link variant, recommend using a url.\n   */\n  key: string;\n\n  /**\n   * The description that will be displayed in search results.\n   */\n  description: string;\n}\n\nexport enum SearchPanelVariant {\n  checkbox,\n  radio,\n  text,\n}\n\n/**\n * Definition of props for SearchPanel.\n */\ninterface SearchPanelProps {\n\n  /**\n   * An array of choices to be displayed.\n   */\n  choices: Array<SearchPanelChoice>,\n\n  /**\n   * Provide a \"None\" choice item so user can \"unselect\" a select choice\n   * when variant={SearchPanelVariant.checkbox} or variant={SearchPanelVariant.radio}\n   */\n  noChoiceItem?: SearchPanelChoice,\n\n  /**\n   * Function that will handle event when search input changes.\n   */\n  onChange: (event: React.ChangeEvent) => void,\n\n  /**\n   * Function that will handle event when selected items change.\n   */\n  onSelectionChange?: (selectedKeys: Array<string>) => void,\n\n  /**\n   * Display a shadow on hover and when expanded.\n   */\n  shadow?: boolean,\n\n  /**\n   * A smaller variant.\n   */\n  small?: boolean,\n\n  /**\n   * Placeholder label in the search input box.\n   */\n  placeholder: string,\n\n  /**\n   * Value of search input.\n   */\n  value: string,\n\n  /**\n   * Variants available: checkbox, radio, text (can be used as links by consumer)\n   */\n  variant?: SearchPanelVariant,\n}\n\n/**\n * SearchPanel component\n * @param props\n */\nconst SearchPanel = (props: SearchPanelProps) => {\n  const {\n    choices,\n    noChoiceItem,\n    onChange,\n    onSelectionChange,\n    placeholder,\n    shadow,\n    small,\n    value,\n    variant\n  } = props;\n  const [isExpanded, setIsExpanded] = React.useState(false);\n  const [isFocused, setIsFocused] = React.useState(false);\n  const [selectedKeys, setSelectedKeys] = React.useState<Array<string>>([]);\n  const fieldsetId: string = \"ChoiceGroup\";\n  const resultContainerId: string = \"ResultContainer\";\n  const searchField = React.useRef<HTMLInputElement>(null);\n\n  let isMultiSelect = false;\n  let isText = true;\n  if (SearchPanelVariant.checkbox === variant) {\n    isMultiSelect = true;\n  }\n  if (SearchPanelVariant.text !== variant) {\n    isText = false;\n  }\n\n  /**\n   * Handle event when user presses outside this component.\n   */\n  const handlePressOutside = () => {\n    if (searchField.current) {\n      searchField.current.blur();\n    }\n    setIsExpanded(false);\n    setIsFocused(false);\n  };\n\n  /**\n   * Handle event when component receives focus.\n   */\n  const handleOnFocus = () => {\n    setIsFocused(true);\n    if (choices.length) {\n      setIsExpanded(true);\n    }\n  };\n\n  /**\n   * Handle component blur event to find if the newly focused element\n   * is within the component or not. If not, collapse the search bar.\n   * @param event\n   */\n  // const handleOnBlur = (event: React.FormEvent) => {\n  //   const currentTarget = event.currentTarget;\n\n  //   // Check the newly focused element in the next tick of the event loop\n  //   setTimeout(() => {\n  //     // Check if the new activeElement is a child of the original container\n  //     if (!currentTarget.contains(document.activeElement)) {\n  //       // You can invoke a callback or add custom logic here\n  //       setIsExpanded(false);\n  //       setIsFocused(false);\n  //     }\n  //   }, 0);\n  // };\n\n  /**\n   * Remove a selected key\n   * @param key\n   * @param updateKeys\n   */\n  const removeSelectedKey = (key: string, updateKeys: Array<string>) => {\n    const index: number = updateKeys.indexOf(key);\n    if (index > -1) {\n      updateKeys.splice(index, 1);\n    }\n  };\n\n  /**\n   * Add a selected key, if not multi-select, remove any previous selected key.\n   * @param key\n   * @param updateKeys\n   */\n  const setSelectedKey = (key: string, updateKeys: Array<string>) => {\n    if (isMultiSelect) {\n      updateKeys.push(key);\n    }\n    else {\n      updateKeys.splice(0, updateKeys.length);\n      updateKeys.push(key);\n    }\n  };\n\n  /**\n   * Handle when an item is selected.\n   * Handle cases where item is single or multi select.\n   * @param event\n   * @param selectedKey\n   */\n  const handleCheckChanged = (event: React.ChangeEvent, selectedKey: string) => {\n    const target = event.target as HTMLInputElement;\n    let updateKeys = [...selectedKeys];\n    let isNoneSelected = false;\n\n    // Set selected key if checked, remove it otherwise.\n    if (target.checked) {\n      setSelectedKey(selectedKey, updateKeys);\n    }\n    else {\n      removeSelectedKey(selectedKey, updateKeys);\n    }\n\n    // If the \"None\" option was selected, make it the only selected item.\n    if (noChoiceItem) {\n      if (selectedKey === noChoiceItem.key && target.checked) {\n        updateKeys = [selectedKey];\n        // Special case for \"None\" option, consumer should get an empty array\n        // while the \"None\" option is checked on screen.\n        isNoneSelected = true;\n      }\n      // If any other item was selected, uncheck the \"None\" item\n      else {\n        removeSelectedKey(noChoiceItem.key, updateKeys);\n      }\n    }\n\n    // Set state\n    setSelectedKeys(updateKeys);\n\n    // Notify the consumer of the currently selected keys\n    if (onSelectionChange) {\n      if (isNoneSelected) {\n        onSelectionChange([]);\n      }\n      else {\n        onSelectionChange(updateKeys);\n      }\n    }\n    // event.preventDefault();\n  };\n\n  /**\n   * Handle changing search input\n   * @param event\n   */\n  const handleSearchChange = async (event: React.ChangeEvent) => {\n    await onChange(event);\n  };\n\n  useEffect(() => {\n    if (isFocused) {\n      if (choices.length) {\n        setIsExpanded(true);\n      }\n      else {\n        setIsExpanded(false);\n      }\n    }\n  }, [choices]);\n\n  /**\n   * Definition of ChoiceItem properties\n   */\n  interface ChoiceItemProps {\n    choice: SearchPanelChoice,\n  }\n\n  /**\n   * Definition of ChoiceItem, radio or checkbox input.\n   * @param param0\n   */\n  const ChoiceItem = ({ choice }: ChoiceItemProps) => {\n    const choiceId = `choice_${choice.key}_${Math.random()}`;\n    let inputType: string = \"radio\";\n    if (isMultiSelect) {\n      inputType = \"checkbox\";\n    }\n    return (\n      <div className={`${styles.resultItem} ${small ? styles.small : \"\"}`}>\n        {isText && (\n          <a href={choice.key}>{choice.description}</a>\n        )}\n        {!isText && (\n          <span>\n            <input\n              id={choiceId}\n              key={choiceId}\n              name={fieldsetId}\n              type={inputType}\n              onChange={(event) => handleCheckChanged(event, choice.key)}\n              value={choice.key}\n              checked={selectedKeys.indexOf(choice.key) > -1}\n            />\n            <label htmlFor={choiceId} className={styles.resultItemLabel}>\n              {choice.description}\n            </label>\n          </span>\n        )}\n      </div>\n    );\n  };\n\n  /**\n   * Handle event when form it submitted.\n   * @param event\n   */\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n    handleOnFocus();\n  };\n\n  const clickOutsideRef = useOnclickOutside(handlePressOutside);\n  useKeypress(\"Escape\", handlePressOutside);\n  useKeypress(\"Enter\", handlePressOutside);\n\n  return (\n    <form\n      className={`\n        ${styles.topContainer}\n        ${small ? styles.small : \"\"}\n      `}\n      ref={clickOutsideRef}\n      onFocus={handleOnFocus}\n      // onBlur={handleOnBlur}\n      onSubmit={handleSubmit}\n    >\n      <div\n        className={`\n            ${styles.searchContainer}\n            ${isExpanded ? styles.searchContainerExpanded : \"\"}\n            ${isExpanded && shadow ? styles.searchContainerExpandedShadow : \"\"}\n            ${small ? styles.small : \"\"}\n            ${shadow ? styles.searchContainerShadow : \"\"}\n          `}\n      >\n        <div className={styles.flexContainer}>\n          <div className={styles.searchIconContainer}>\n            <span className={styles.searchIcon}>\n              <svg\n                focusable=\"false\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path d=\"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\n              </svg>\n            </span>\n          </div>\n          <div className={styles.inputContainer}>\n            <div className={styles.inputFieldContainer} />\n            <input\n              ref={searchField}\n              className={`${styles.inputField} ${small ? styles.small : \"\"}`}\n              type=\"text\"\n              aria-autocomplete=\"both\"\n              aria-haspopup=\"false\"\n              autoCapitalize=\"off\"\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              role=\"combobox\"\n              spellCheck=\"false\"\n              title={placeholder}\n              aria-label={placeholder}\n              aria-controls={resultContainerId}\n              aria-expanded={isExpanded}\n              placeholder={placeholder}\n              onChange={handleSearchChange}\n              value={value}\n            />\n          </div>\n        </div>\n      </div>\n      {isExpanded && (\n        <div\n          id={resultContainerId}\n          className={styles.resultContainer}\n        >\n          <fieldset\n            id={fieldsetId}\n            className={`\n            ${styles.resultListContainer}\n            ${shadow ? styles.resultListContainerExpandedShadow : \"\"}\n            ${small ? styles.small : \"\"}\n          `}\n          >\n            <div className={styles.resultSeperator} />\n            <ul className={styles.resultList} role=\"listbox\">\n              {noChoiceItem && (\n                <li\n                  key={noChoiceItem.key}\n                  className={styles.resultListItem}\n                  role=\"presentation\"\n                >\n                  <ChoiceItem choice={noChoiceItem} />\n                </li>\n              )}\n              {choices.map((choice) => (\n                <li\n                  key={choice.key}\n                  className={styles.resultListItem}\n                  role=\"presentation\"\n                >\n                  <ChoiceItem choice={choice} />\n                </li>\n              ))}\n            </ul>\n          </fieldset>\n        </div>\n      )}\n    </form>\n  );\n};\n\nexport default SearchPanel;\n","import { useLayoutEffect } from 'react';\n\nvar index =  useLayoutEffect ;\n\nexport default index;\n","import { useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport default useLatest;\n","import { useEffect } from 'react';\nimport useLatest from 'use-latest';\n\nvar castArray = function castArray(value) {\n  return Array.isArray(value) ? value : [value];\n};\n\n// Fixing inconsistencies from older browsers\n// https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\nvar aliases = new Map([['Win', 'Meta'], ['Scroll', 'ScrollLock'], ['Spacebar', ' '], ['Down', 'ArrowDown'], ['Left', 'ArrowLeft'], ['Right', 'ArrowRight'], ['Up', 'ArrowUp'], ['Del', 'Delete'], ['Crsel', 'CrSel'], ['Exsel', 'ExSel'], ['Apps', 'ContextMenu'], ['Esc', 'Escape'], ['Decimal', '.'], ['Multiply', '*'], ['Add', '+'], ['Subtract', '-'], ['Divide', '/']]);\n\nvar shimKeyboardEvent = function shimKeyboardEvent(event) {\n  if (aliases.has(event.key)) {\n    var key = aliases.get(event.key);\n    Object.defineProperty(event, 'key', {\n      get: function get() {\n        return key;\n      }\n    });\n  }\n};\n\nvar useKeypress = function useKeypress(keys, handler) {\n  var keysRef = useLatest(keys);\n  var handerRef = useLatest(handler);\n  useEffect(function () {\n    var handleKeydown = function handleKeydown(event) {\n      shimKeyboardEvent(event);\n\n      if (castArray(keysRef.current).includes(event.key)) {\n        handerRef.current(event);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeydown);\n    return function () {\n      window.removeEventListener('keydown', handleKeydown);\n    };\n  }, []);\n};\n\nexport default useKeypress;\n","import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport SearchPanel, { SearchPanelChoice, SearchPanelVariant } from \"react-search-panel\";\nimport \"react-search-panel/dist/index.css\";\n\n/**\n * Page styles\n */\nconst styles = {\n  container: {\n    margin: \"auto\",\n    maxWidth: \"650px\",\n    padding: \"40px\",\n  },\n  formItem: {\n    marginLeft: \"15px\",\n  },\n  formLabel: {\n    marginLeft: \"5px\",\n  }\n};\n\n/**\n * API URL\n */\nconst baseUrl = \"http://api.tvmaze.com/search/shows?q=\";\n\n/**\n * Minimum character count before calling API\n */\nconst MIN_INPUT = 3;\n\n/**\n * Definition of a Show from tvmaze API\n * @interface Show\n */\nexport interface Show {\n  id: string;\n  name: string;\n}\n\n/**\n * Definition of a result from tvmaze API\n * @interface Result\n */\nexport interface ShowContainer {\n  score: number;\n  show: Show;\n}\n\n/**\n * A demo application\n * @returns\n */\nconst App = () => {\n  const [input, setInput] = React.useState(\"\");\n  const [variant, setVariant] = React.useState<SearchPanelVariant>(SearchPanelVariant.text);\n  const [choices, setChoices] = React.useState<Array<SearchPanelChoice>>([]);\n\n  /**\n   * Handle change in search input.\n   * @param event\n   */\n  const handleSearchChange = (event: React.ChangeEvent) => {\n    const target = event.target as HTMLInputElement;\n    setInput(target.value);\n  };\n\n  /**\n   * Perform a search when input changes.\n   */\n  useEffect(() => {\n    const search = async () => {\n      console.log(\"Search: \" + input);\n      const resultChoices: Array<SearchPanelChoice> = [];\n\n      // Only perform a search if end user has typed a minimum number of characters\n      if (input.length >= MIN_INPUT) {\n        const url = `${baseUrl}${input}`;\n        const response = await axios(url);\n        const results = await response.data;\n\n        // Transform results to choices.\n        results.forEach((result: ShowContainer) => {\n          const choice = { key: result.show.id, description: result.show.name };\n          resultChoices.push(choice);\n        });\n      }\n      setChoices(resultChoices);\n    };\n    search();\n  }, [input]);\n\n  interface VariantChoiceProps {\n    label: string;\n    variantChoice: SearchPanelVariant;\n  }\n\n  const VariantChoice = (props: VariantChoiceProps) => {\n    const { label, variantChoice } = props;\n    return (\n      <label style={styles.formItem}>\n        <input\n          key={label}\n          type=\"radio\"\n          value={variantChoice}\n          tabIndex={0}\n          checked={variant === variantChoice}\n          onChange={() => setVariant(variantChoice)}\n        />\n        <span style={styles.formLabel}>\n          {label}\n        </span>\n      </label>\n    );\n  };\n\n  return (\n    <div style={styles.container}>\n      <h1>A demonstration of react-search-panel</h1>\n      <p>\n        This is a demonstration of react-search-panel.\n      </p>\n      <p>\n        Configure variant:\n        <VariantChoice label=\"Checkbox\" variantChoice={SearchPanelVariant.checkbox} />\n        <VariantChoice label=\"Radio\" variantChoice={SearchPanelVariant.radio} />\n        <VariantChoice label=\"Text\" variantChoice={SearchPanelVariant.text} />\n      </p>\n      <div>\n        <SearchPanel\n          choices={choices}\n          onChange={handleSearchChange}\n          placeholder=\"Search TV shows\"\n          small\n          value={input}\n          variant={variant}\n        />\n      </div>\n      <p>\n        This demonstration searches for TV shows when you type at least {MIN_INPUT} characters.\n        It uses the public <a href=\"http://www.tvmaze.com/api#show-search\">TVMAZE API</a>.\n      </p>\n    </div>\n  );\n};\n\nexport default App;\n","import \"./index.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}